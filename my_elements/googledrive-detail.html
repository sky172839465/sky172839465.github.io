 <dom-module id=googledrive-detail><template><iron-ajax auto url={{folderListUrl}} handle-as=json last-response={{folderListInfo}} on-error=error headers={{author}}> </iron-ajax><template is=dom-repeat items={{folderListInfo.items}} as=file><iron-ajax auto url={{_fileUrl(file.id)}} handle-as=json on-response=_setFileInfo on-error=error headers={{author}} loading=isLoading> </iron-ajax></template></template><script>Polymer({is:'googledrive-detail',properties:{isLoading:{type:Boolean,notify:true},isSignin:{type:Boolean,notify:true},folderListUrl:{type:String,notify:true},apiKey:{type:String,notify:true},folderListInfo:{type:JSON,notify:true},fileList:{type:JSON,value:{file:[]},notify:true},isFileExist:{type:Boolean,value:false,notify:true}},_fileUrl:function(fileID){var fields="name,webContentLink,webViewLink,thumbnailLink,modifiedTime,owners/displayName";return"https://www.googleapis.com/drive/v3/files/"+fileID+"?fields="+fields+"&key="+this.apiKey;},_setFileInfo:function(fileInfo){var info=fileInfo.detail.response;this.fileList.file.push({fileName:info.name,fileDownload:info.webContentLink,fileWebView:info.webViewLink,fileImage:info.thumbnailLink,fileModifiedTime:info.modifiedTime});if(this.fileList.file.length==this.folderListInfo.items.length)
this.isFileExist=true;}});</script></dom-module>